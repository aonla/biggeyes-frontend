<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Home</title>

<style>
body{text-align:center;font-family:sans-serif}
button{
  padding:12px 30px;
  background:#c2185b;
  color:#fff;
  border:none;
  border-radius:25px;
  margin-top:20px;
}
</style>

<!-- ðŸ” TOKEN GUARD (FAST + SAFE) -->
<script>
if (!localStorage.getItem("token")) {
  window.location.replace("login.html"); // ðŸ”¥ replace (no back)
}
</script>

</head>
<body>

<h2>Welcome to BiggEyes</h2>
<p id="email"></p>

<button onclick="logout()">Logout</button>

<script>
const token = localStorage.getItem("token");

/* ðŸ”¥ PROFILE FETCH */
fetch("https://biggeyes.onrender.com/api/user/profile", {
  headers: {
    Authorization: "Bearer " + token
  }
})
.then(res => res.json())
.then(data => {
  document.getElementById("email").innerText = data.email || "";
})
.catch(() => {
  // token invalid / expired
  localStorage.clear();
  window.location.replace("login.html");
});

/* ðŸ”¥ LOGOUT */
function logout(){
  localStorage.clear();
  window.location.replace("login.html"); // ðŸ”¥ fast redirect
}
</script>

</body>
</html>
